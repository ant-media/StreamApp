<!DOCTYPE html>
<html>

<head>
	<title>WebRTC Samples > WebRTC MultiTrack Conference</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="UTF-8">
	<link rel="stylesheet" href="css/external/bootstrap4/bootstrap.min.css">
	<link rel="stylesheet" href="css/samples.css" />
    <style>
	.myContainer {
		width: 80%;
		margin: 0 auto; 
	}
    </style>
</head>

<body>
	<div class="myContainer">
		<div class="header clearfix">
			<div class="row">
				<h3 class="col text-muted" id="title"><a href="samples.html">WebRTC Samples</a> > WebRTC MultiTrack Conference </h3>
			</div>
		</div>

		<iframe src="samples/multitrack-conference-frame.html" class="embed-frame" id="conferencing-frame" allow="camera;microphone;display-capture"></iframe>
			
	</div>
	<script  type="module">
		import {getUrlParameter} from "./js/fetch.stream.js" 
		import {getQueryParameter} from "./js/utility.js" 

		let myIframe = document.getElementById("conferencing-frame");
		let url_string = "samples/multitrack-conference-frame.html";
		let parrentURL = getQueryParameter("parrentURL") 
		if(parrentURL == "" || parrentURL ==undefined){
			parrentURL = (window.location != window.parent.location)
            ? document.referrer
            : document.location.href;
		}

		console.log(parrentURL)

		var debug = getUrlParameter("debug");
		if (debug == null) {
			debug = false;
		}
		url_string += "?debug=" + debug;

		url_string += getQueryParameter("token");
		url_string += getQueryParameter("streamId");
		url_string += getQueryParameter("playOnly");
		url_string += getQueryParameter("dcOnly");
        url_string += getQueryParameter("streamName");
        url_string += getQueryParameter("roomname");
		url_string += "&parrentURL=" + parrentURL;

        
		console.log(url_string);
		myIframe.src = url_string;


	</script>

</body>
</html>